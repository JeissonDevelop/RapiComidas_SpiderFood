import{u as C,r as o,j as e,c as F}from"./index-DaKuGouW.js";import{L as P}from"./Loading-CUdY1bcp.js";const I=({onReturnToMenu:i})=>{const{cartItems:s,removeFromCart:v,submitCart:g}=C(),[n,l]=o.useState(!1),[b,u]=o.useState(!1),[a,m]=o.useState(""),[c,x]=o.useState(""),[f,p]=o.useState(!1),h=()=>s.reduce((r,t)=>r+t.price*t.cartQuantity,0),S=r=>{console.log(`üóëÔ∏è Removiendo producto ${r} del carrito`),v(r),p(!0),setTimeout(()=>p(!1),2e3)},N=async r=>{if(r.preventDefault(),!a.trim()||!c.trim()){alert("Por favor completa todos los campos");return}if(s.length===0){alert("El carrito est√° vac√≠o");return}l(!0),console.log("üöÄ Iniciando env√≠o de pedido...");try{const t={customerName:a.trim(),customerAddress:c.trim(),items:s.map(d=>({name:d.name,quantity:d.cartQuantity,price:d.price})),total:h(),status:"pending"},y=await F(t);console.log("üéâ ¬°Pedido creado exitosamente!",y),g(a,c),u(!0),m(""),x(""),setTimeout(()=>{u(!1),i()},3e3)}catch(t){console.error("üí• Error al crear pedido:",t),alert("Error al crear el pedido. Por favor intenta nuevamente.")}finally{l(!1)}};return e.jsxs("div",{children:[n&&e.jsx(P,{message:"Creando tu pedido..."}),b&&e.jsx("div",{style:j,children:"‚úÖ ¬°Pedido creado exitosamente!"}),f&&e.jsx("div",{style:j,children:"üóëÔ∏è Producto eliminado del carrito"}),e.jsx("h2",{className:"foodOrderTitle",children:"üõí Tu Carrito"}),s.length===0?e.jsx("p",{style:{textAlign:"center",color:"#999"},children:"El carrito est√° vac√≠o"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cartItems",children:s.map(r=>e.jsxs("div",{className:"cartItem",children:[e.jsxs("div",{children:[e.jsx("strong",{children:r.name}),e.jsxs("p",{children:["Cantidad: ",r.cartQuantity," x ",r.price.toFixed(2),"‚Ç¨"]})]}),e.jsxs("div",{children:[e.jsxs("span",{children:[(r.price*r.cartQuantity).toFixed(2),"‚Ç¨"]}),e.jsx("button",{onClick:()=>S(r.id),className:"btnRemove",children:"‚úï"})]})]},r.id))}),e.jsx("div",{className:"cartTotal",children:e.jsxs("strong",{children:["Total: ",h().toFixed(2),"‚Ç¨"]})}),e.jsxs("form",{onSubmit:N,className:"foodOrderForm",children:[e.jsxs("div",{className:"formGroup",children:[e.jsx("label",{htmlFor:"customerName",children:"Nombre del Cliente"}),e.jsx("input",{id:"customerName",type:"text",value:a,onChange:r=>m(r.target.value),placeholder:"Juan P√©rez",required:!0})]}),e.jsxs("div",{className:"formGroup",children:[e.jsx("label",{htmlFor:"customerAddress",children:"Direcci√≥n de Entrega"}),e.jsx("input",{id:"customerAddress",type:"text",value:c,onChange:r=>x(r.target.value),placeholder:"Calle Principal 123",required:!0})]}),e.jsxs("div",{className:"foodOrderButtonGroup",children:[e.jsx("button",{type:"button",className:"btnBack",onClick:i,children:"‚Üê Volver al Men√∫"}),e.jsx("button",{type:"submit",className:"btnSubmit",disabled:n,children:"‚úì Crear Pedido"})]})]})]})]})},j={position:"fixed",top:"20px",right:"20px",background:"#27ae60",color:"white",padding:"15px 25px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1e4,fontSize:"16px",fontWeight:"bold"};export{I as default};
