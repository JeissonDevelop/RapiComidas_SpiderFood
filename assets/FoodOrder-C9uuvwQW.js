import{u as h,r as d,j as s}from"./index-DaKuGouW.js";import{L as p}from"./Loading-CUdY1bcp.js";const C=({foodItem:t,availableStock:e,onToBack:l})=>{const{addToCart:m}=h(),[a,i]=d.useState(1),[n,c]=d.useState(!1),[u,x]=d.useState(!1),g=async()=>{if(a>0&&a<=e){c(!0),console.log(`üì¶ Agregando al carrito: ${t.name} x${a}`);try{await new Promise(r=>setTimeout(r,500)),m(t.id,a),console.log(`‚úÖ ${t.name} x${a} agregado al carrito`),c(!1),x(!0),setTimeout(()=>{x(!1),l()},1500)}catch(r){console.error("‚ùå Error al agregar al carrito:",r),alert("Error al agregar el producto al carrito"),c(!1)}}};return s.jsxs("div",{className:"foodDetailContainer",children:[n&&s.jsx(p,{message:`Agregando ${t.name}...`}),u&&s.jsx("div",{style:j,children:"‚úÖ Producto agregado al carrito exitosamente"}),s.jsx("button",{className:"btnBackDetail",onClick:l,children:"‚Üê Volver al men√∫"}),s.jsxs("div",{className:"foodDetailCard",children:[s.jsx("div",{className:"foodDetailImageContainer",children:s.jsx("img",{src:t.image,alt:t.name,className:"foodDetailImage"})}),s.jsxs("div",{className:"foodDetailContent",children:[s.jsx("h2",{className:"foodDetailName",children:t.name}),s.jsx("p",{className:"foodDetailDesc",children:t.desc}),s.jsxs("div",{className:"foodDetailInfo",children:[s.jsxs("div",{className:"priceSection",children:[s.jsx("span",{className:"priceLabel",children:"Precio:"}),s.jsxs("span",{className:"priceValue",children:[t.price.toFixed(2),"‚Ç¨"]})]}),s.jsxs("div",{className:"stockSection",children:[s.jsx("span",{className:"stockLabel",children:"Stock disponible:"}),s.jsx("span",{className:`stockValue ${e===0?"outOfStock":""}`,children:e===0?"Sin stock":`${e}`})]})]}),e>0&&s.jsxs("div",{className:"quantitySection",children:[s.jsx("label",{htmlFor:"quantity",children:"Cantidad:"}),s.jsxs("div",{className:"quantityControls",children:[s.jsx("button",{className:"btnQty",onClick:()=>i(Math.max(1,a-1)),disabled:n,children:"‚àí"}),s.jsx("input",{id:"quantity",type:"number",min:"1",max:e,value:a,onChange:r=>{const o=Number(r.target.value);o>0&&o<=e&&i(o)},disabled:n,className:"quantityInput"}),s.jsx("button",{className:"btnQty",onClick:()=>i(Math.min(e,a+1)),disabled:n,children:"+"})]})]}),s.jsx("button",{className:"btnAddToCart",onClick:g,disabled:e===0||n||a>e,children:e===0?"‚ùå Sin Stock":n?"Agregando...":`‚úì Agregar ${a} al Carrito`})]})]})]})},j={position:"fixed",top:"20px",right:"20px",background:"#27ae60",color:"white",padding:"15px 25px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1e4,fontSize:"16px",fontWeight:"bold"};export{C as default};
